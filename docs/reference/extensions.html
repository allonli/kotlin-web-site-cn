<!DOCTYPE html>
<!--[if (IE 7)&!(IEMobile)]><html class="no-js ie ie7" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js ie ie8" lang="en"><![endif]-->
<!--[if (IE 9)&!(IEMobile)]><html class="no-js ie ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<html>
<head>
<meta charset="utf-8">

    <title>扩展 - Kotlin Programming Language</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/kotlin-web-site-cn/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/kotlin-web-site-cn/assets/images/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-144x144.png" />
<link rel="stylesheet" href="/kotlin-web-site-cn/css/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="扩展" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://kotlinlang.org/docs/reference/extensions.html" />
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png" />

<meta property="og:description" content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">

<meta property="og:site_name" content="Kotlin" />

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="扩展">

<meta name="twitter:description" content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">

<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png ">
<!-- Social Media tag Ends -->
<script src="/kotlin-web-site-cn/js/vendor/requirejs/require.js"></script>
<script src="/kotlin-web-site-cn/js/config/bootstrap.js"></script>
</head>
<body>
<!-- 
 -->

<div class="global-layout">

    <header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/kotlin-web-site-cn/">Kotlin</a>

            

            <nav role="navigation" class="global-nav">
    

    <div class="nav-links">
        
            
            
            
            

            

            

            

            <a href="/kotlin-web-site-cn/docs/reference/"
               class="nav-item "
            >
                学习
            </a>
        
            
            
            
            

            

            

            

            <a href="/kotlin-web-site-cn/contribute.html"
               class="nav-item "
            >
                贡献
            </a>
        
            
            
            
            

            

            

            

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线尝试
            </a>
        
            
            
            
            

            
                
    </div>

    

    <div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div>
</nav>

        </div>
    </div>

    <div class="g-layout">
        
    </div>
</header>


    <div class="g-layout global-content">
        <div class="g-grid">

    <div class="g-12">
        
    

    <nav role="navigation" class="docs-nav">
        
            
            

            <div class="nav-item-wrap">
            
                    <a href="/kotlin-web-site-cn/docs/reference/" class="nav-item is_active">
                        <span class="nav-item-text">
                            参考
                        </span>
                    </a>
            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/tutorials/" class="nav-item">
                    <span class="nav-item-text">
                        教程
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        视频
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        事件记
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                </a>

            
            </div>
        
    </nav>


    </div>

    <aside class="g-3">
        <div id="reference-nav">
            





<nav role="navigation" class="side-tree-nav">

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/basic-syntax.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">基础语法</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/idioms.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">习惯用法</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/coding-conventions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">编码习惯</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="基础">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">基础</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/basic-types.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">基本类型</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/packages.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">包</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/control-flow.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">控制流</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/returns.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">返回和跳转</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="类和对象">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">类和对象</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类和继承</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/properties.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">属性和字段</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/interfaces.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">接口</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/visibility-modifiers.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">可见性修饰符</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                    <div class="marker"></div>
                    <div class="text">扩展</div>
                </div>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/data-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">数据类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/generics.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">泛型</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/nested-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">嵌套类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/enum-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">枚举类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/object-declarations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">对象</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/delegation.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">委托</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/delegated-properties.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">委托属性</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="函数和Lambdas表达式">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">函数和Lambdas表达式</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/functions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">函数</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/lambdas.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Lambdas表达式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/inline-functions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">内联函数</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="其他">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">其他</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/multi-declarations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">解构声明</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/collections.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">集合</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/ranges.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">范围</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/typecasts.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类型检查与转换</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/this-expressions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">This表达式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/equality.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">等式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/operator-overloading.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">操作符重载</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/null-safety.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">空安全</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/exceptions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">异常</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/annotations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">注解</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/reflection.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">反射</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/type-safe-builders.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类型安全的构建器</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/dynamic-type.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">动态类型</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="参考">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">参考</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/api/latest/jvm/stdlib/"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">API参考</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/grammar.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">语法</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">互操作</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/java-interop.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Kotlin 调用 Java</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/java-to-kotlin-interop.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Java 调用 Kotlin</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/kotlin-doc.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">生成kotlin代码文档</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-maven.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Maven</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-ant.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Ant</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-gradle.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Gradle</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/kotlin-osgi.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Kotlin 和 OSGi</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="常见问题">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">常见问题</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/faq.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">常见问题</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/comparison-to-java.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">与Java比较</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/comparison-to-scala.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">与Scala比较</span></a>
            
            </div>
        

    </div>

    

</nav>

            <a href="https://raw.githubusercontent.com/cctanfujun/kotlin-web-site-cn/gh-pages/kotlin-docs.pdf" class="reference-pdf-link">
                <span class="icon"></span>
                <span class="text">Kotlin 手册 中文版</span>
            </a>
        </div>
    </aside>

    <article role="main" class="page-content g-9">
        


<a href="https://github.com/cctanfujun/kotlin-web-site-cn/edit/master/docs/reference/extensions.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>

        <h1 id="section">扩展<a href="#section" class="anchor"></a></h1>

<p>Kotlin和c#、Gosu一样，能够扩展一个类的新功能，而无需继承类或使用任何类型的设计模式，如装饰者。
这通过特殊的声明叫做_extensions_。Kotlin支持_extension functions_ 和 <em>extension properties</em>.</p>

<h2 id="section-1">扩展函数<a href="#section-1" class="anchor"></a></h2>

<p>声明一个扩展函数，我们需要用一个 <em>接收者类型</em> 也就是被扩展的类型来作为他的前缀。
下面是为<code>MutableList&lt;Int&gt;</code>添加一个<code>swap</code>方法：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">fun</span> <span class="nf">MutableList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;.</span><span class="n">swap</span><span class="p">(</span><span class="n">index1</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">index2</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">val</span> <span class="py">tmp</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="c1">// &#39;this&#39; corresponds to the list</span>
  <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span>
  <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span> <span class="p">=</span> <span class="n">tmp</span>
<span class="p">}</span></code></pre>

<p>这个<em class="keyword">this</em>关键字在扩展方法内接受对应的对象（在点符号以前传过来的）
现在，我们可以像一个其他方法一样调用<code>MutableList&lt;Int&gt;</code>:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">l</span> <span class="p">=</span> <span class="n">mutableListOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">l</span><span class="p">.</span><span class="n">swap</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span> <span class="c1">// &#39;this&#39; inside &#39;swap()&#39; will hold the value of &#39;l&#39;</span></code></pre>

<p>当然，这个方法像这样<code>MutableList&lt;T&gt;</code>，我们可以使用泛型：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">fun</span> <span class="err">&lt;</span><span class="nf">T</span><span class="p">&gt;</span> <span class="n">MutableList</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">swap</span><span class="p">(</span><span class="n">index1</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">index2</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">val</span> <span class="py">tmp</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="c1">// &#39;this&#39; corresponds to the list</span>
  <span class="k">this</span><span class="p">[</span><span class="n">index1</span><span class="p">]</span> <span class="p">=</span> <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span>
  <span class="k">this</span><span class="p">[</span><span class="n">index2</span><span class="p">]</span> <span class="p">=</span> <span class="n">tmp</span>
<span class="p">}</span></code></pre>

<p>在接收类型表达式中，我们要在方法名可用前声明泛型类型参数。
参见<a href="generics.html">Generic functions</a>.</p>

<h2 id="section-2">扩展的静态解析<a href="#section-2" class="anchor"></a></h2>

<p>扩展不能真正的修改他们继承的类。通过定义一个扩展，你不能在类内插入新成员，
仅仅是通过该类的实例用点表达式去调用这个新函数。</p>

<p>我们想强调下扩展方法是被静态分发的，即他们不是接收类型的虚方法。
This means that the extension function being called is determined by the type of the expression on which the function is invoked,
not by the type of the result of evaluating that expression at runtime. For example:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">open</span> <span class="k">class</span> <span class="nc">C</span>

<span class="k">class</span> <span class="nc">D</span><span class="p">:</span> <span class="n">C</span><span class="p">()</span>

<span class="k">fun</span> <span class="nf">C</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;c&quot;</span>

<span class="k">fun</span> <span class="nf">D</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">=</span> <span class="s">&quot;d&quot;</span>

<span class="k">fun</span> <span class="nf">printFoo</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="n">C</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">foo</span><span class="p">())</span>
<span class="p">}</span>

<span class="n">printFoo</span><span class="p">(</span><span class="n">D</span><span class="p">())</span></code></pre>

<p>This example will print “c”, because the extension function being called depends only on the declared type of the
parameter <code>c</code>, which is the <code>C</code> class.</p>

<p>If a class has a member function, and an extension function is defined which has the same receiver type, the same name
and is applicable to given arguments, the <strong>member always wins</strong>.
For example:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;member&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">C</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;extension&quot;</span><span class="p">)</span> <span class="p">}</span></code></pre>

<p>如果我们调用<code>C</code>类型的<code>c</code>的<code>c.foo()</code>，它将打印”member”，而不是”extension”.</p>

<p>However, it’s perfectly OK for extension functions to overload member functions which have the same name but a different signature:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;member&quot;</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">C</span><span class="p">.</span><span class="n">foo</span><span class="p">(</span><span class="n">i</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;extension&quot;</span><span class="p">)</span> <span class="p">}</span></code></pre>

<p>The call to <code>C().foo(1)</code> will print “extension”.</p>

<h2 id="nullable">Nullable接收者<a href="#nullable" class="anchor"></a></h2>

<p>注意扩展可被定义为可空的接收类型。这样的扩展可以被对象变量调用，
即使他的值是null，你可以在方法体内检查<code>this == null</code>，这也允许你
在没有检查null的时候调用Kotlin中的toString()：检查发生在扩展方法的内部的时候</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">fun</span> <span class="nf">Any</span><span class="o">?.</span><span class="n">toString</span><span class="p">():</span> <span class="n">String</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span> <span class="k">return</span> <span class="s">&quot;null&quot;</span>
    <span class="c1">// after the null check, &#39;this&#39; is autocast to a non-null type, so the toString() below</span>
    <span class="c1">// resolves to the member function of the Any class</span>
    <span class="k">return</span> <span class="n">toString</span><span class="p">()</span>
<span class="p">}</span></code></pre>

<h2 id="section-3">扩展属性<a href="#section-3" class="anchor"></a></h2>

<p>和方法相似，Kotlin支持扩展属性</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="err">&lt;</span><span class="py">T</span><span class="p">&gt;</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;.</span><span class="n">lastIndex</span><span class="p">:</span> <span class="n">Int</span>
  <span class="k">get</span><span class="p">()</span> <span class="p">=</span> <span class="n">size</span> <span class="p">-</span> <span class="m">1</span></code></pre>

<p>注意：由于扩展没有实际的将成员插入类中，因此对扩展来说是无效的
属性是有<a href="properties.html#backing-fields">backing field</a>.这就是为什么<strong>初始化其不允许有
扩展属性</strong>。他们的行为只能显式的使用 getters/setters.</p>

<p>例子:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">Foo</span><span class="p">.</span><span class="n">bar</span> <span class="p">=</span> <span class="m">1</span> <span class="c1">// error: initializers are not allowed for extension properties</span></code></pre>

<h2 id="section-4">伴生对象的扩展<a href="#section-4" class="anchor"></a></h2>

<p>如果一个类定义有一个<a href="object-declarations.html#companion-objects">伴生对象</a> ，你也可以为伴生对象定义
扩展函数和属性</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">MyClass</span> <span class="p">{</span>
  <span class="n">companion</span> <span class="k">object</span> <span class="err">{ }  // </span><span class="nc">will</span> <span class="n">be</span> <span class="n">called</span> <span class="s">&quot;Companion&quot;</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">MyClass</span><span class="p">.</span><span class="n">Companion</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<p>就像伴生对象的其他普通成员，只用用类名作为限定符去调用他们</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="n">MyClass</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span></code></pre>

<h2 id="section-5">扩展范围<a href="#section-5" class="anchor"></a></h2>

<p>大多数时候，我们定义扩张方法在顶层，即直接在包里</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">package</span> <span class="nn">foo.bar</span>

<span class="k">fun</span> <span class="nf">Baz</span><span class="p">.</span><span class="n">goo</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span></code></pre>

<p>使用一个定义的包之外的扩展，我们需要导入他的头文件：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">package</span> <span class="nn">com.example.usage</span>

<span class="k">import</span> <span class="nn">foo.bar.goo</span> <span class="c1">// importing all extensions by name &quot;goo&quot;</span>
                   <span class="c1">// or</span>
<span class="k">import</span> <span class="nn">foo.bar.*</span>   <span class="c1">// importing everything from &quot;foo.bar&quot;</span>

<span class="k">fun</span> <span class="nf">usage</span><span class="p">(</span><span class="n">baz</span><span class="p">:</span> <span class="n">Baz</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">baz</span><span class="p">.</span><span class="n">goo</span><span class="p">()</span>
<span class="p">)</span></code></pre>

<p>更多信息参见<a href="packages.html#imports">Imports</a></p>

<h2 id="declaring-extensions-as-members">Declaring Extensions as Members<a href="#declaring-extensions-as-members" class="anchor"></a></h2>

<p>Inside a class, you can declare extensions for another class. Inside such an extension, there are multiple <em>implicit receivers</em> -
objects members of which can be accessed without a qualifier. The instance of the class in which the extension is declared is called
<em>dispatch receiver</em>, and the instance of the receiver type of the extension method is called <em>extension receiver</em>.</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">D</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">baz</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">D</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">bar</span><span class="p">()</span>   <span class="c1">// calls D.bar</span>
        <span class="n">baz</span><span class="p">()</span>   <span class="c1">// calls C.baz</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">caller</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="n">D</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">d</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span>   <span class="c1">// call the extension function</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>In case of a name conflict between the members of the dispatch receiver and the extension receiver, the extension receiver takes
precedence. To refer to the member of the dispatch receiver you can use the <a href="this-expressions.html#qualified">qualified <code>this</code> syntax</a>.</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
    <span class="k">fun</span> <span class="nf">D</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">toString</span><span class="p">()</span>         <span class="c1">// calls D.toString()</span>
        <span class="k">this</span><span class="n">@C</span><span class="p">.</span><span class="n">toString</span><span class="p">()</span>  <span class="c1">// calls C.toString()</span>
    <span class="p">}</span></code></pre>

<p>Extensions declared as members can be declared as <code>open</code> and overridden in subclasses. This means that the dispatch of such
functions is virtual with regard to the dispatch receiver type, but static with regard to the extension receiver type.</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">open</span> <span class="k">class</span> <span class="nc">D</span> <span class="p">{</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">D1</span> <span class="p">:</span> <span class="n">D</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span>

<span class="k">open</span> <span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
    <span class="k">open</span> <span class="k">fun</span> <span class="nf">D</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;D.foo in C&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">open</span> <span class="k">fun</span> <span class="nf">D1</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;D1.foo in C&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">caller</span><span class="p">(</span><span class="n">d</span><span class="p">:</span> <span class="n">D</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">d</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span>   <span class="c1">// call the extension function</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">C1</span> <span class="p">:</span> <span class="n">C</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">override</span> <span class="k">fun</span> <span class="nf">D</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;D.foo in C1&quot;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">D1</span><span class="p">.</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">println</span><span class="p">(</span><span class="s">&quot;D1.foo in C1&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">C</span><span class="p">().</span><span class="n">caller</span><span class="p">(</span><span class="n">D</span><span class="p">())</span>   <span class="c1">// prints &quot;D.foo in C&quot;</span>
<span class="n">C1</span><span class="p">().</span><span class="n">caller</span><span class="p">(</span><span class="n">D</span><span class="p">())</span>  <span class="c1">// prints &quot;D.foo in C1&quot; - dispatch receiver is resolved virtually</span>
<span class="n">C</span><span class="p">().</span><span class="n">caller</span><span class="p">(</span><span class="n">D1</span><span class="p">())</span>  <span class="c1">// prints &quot;D.foo in C&quot; - extension receiver is resolved statically</span></code></pre>

<h2 id="motivation">Motivation<a href="#motivation" class="anchor"></a></h2>

<h2 id="section-6">动机<a href="#section-6" class="anchor"></a></h2>

<p>在Java中，我们将类命名为”*Utils”: <code>FileUtils</code>, <code>StringUtils</code>等，著名的<code>java.util.Collections</code>也属于同一种命名方式。
关于这些Utils-classes的不愉快的部分是这样写代码的：</p>

<pre><code class="code-block _highlighted lang_java"><span class="c1">// Java</span>
<span class="n">Collections</span><span class="o">.</span><span class="na">swap</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">Collections</span><span class="o">.</span><span class="na">binarySearch</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">Collections</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">otherList</span><span class="o">)),</span> <span class="n">Collections</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">list</span><span class="o">))</span></code></pre>

<p>这些类名总是碍手碍脚的，我们可以通过静态导入得到：</p>

<pre><code class="code-block _highlighted lang_java"><span class="c1">// Java</span>
<span class="n">swap</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">binarySearch</span><span class="o">(</span><span class="n">list</span><span class="o">,</span> <span class="n">max</span><span class="o">(</span><span class="n">otherList</span><span class="o">)),</span> <span class="n">max</span><span class="o">(</span><span class="n">list</span><span class="o">))</span></code></pre>

<p>这会变得好一点，但是我们并没有从IDE强大的自动补全功能中得到帮助。我们希望它能更好点</p>

<pre><code class="code-block _highlighted lang_java"><span class="c1">// Java</span>
<span class="n">list</span><span class="o">.</span><span class="na">swap</span><span class="o">(</span><span class="n">list</span><span class="o">.</span><span class="na">binarySearch</span><span class="o">(</span><span class="n">otherList</span><span class="o">.</span><span class="na">max</span><span class="o">()),</span> <span class="n">list</span><span class="o">.</span><span class="na">max</span><span class="o">())</span></code></pre>

<p>但是我们不希望实现<code>List</code>类内所有可能的方法，对吧？这时候扩展将会帮助我们。</p>

    </article>
</div>

<script>
require(['page/reference'], function(page) {
    page();
});
</script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2016 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
                Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a> Translation by <a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>
            </div>
        </div>
    </div>

</footer>
<script>require(['com/search', 'com/cookie-banner']);</script>
</body>
</html>