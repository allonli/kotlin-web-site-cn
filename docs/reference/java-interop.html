<!DOCTYPE html>
<!--[if (IE 7)&!(IEMobile)]><html class="no-js ie ie7" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js ie ie8" lang="en"><![endif]-->
<!--[if (IE 9)&!(IEMobile)]><html class="no-js ie ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<html>
<head>
<meta charset="utf-8">

    <title>在Kotlin中调用Java代码 - Kotlin Programming Language</title>

<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<link rel="Shortcut Icon" href="/kotlin-web-site-cn/assets/images/favicon.ico" type="image/x-icon"/>
<link rel="apple-touch-icon" href="/kotlin-web-site-cn/assets/images/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/kotlin-web-site-cn/assets/images/apple-touch-icon-144x144.png" />
<link rel="stylesheet" href="/kotlin-web-site-cn/css/styles.css">


<!-- Social Media tag Starts -->
<!-- Place this data between the <head> tags of your website -->
<!-- Open Graph data -->
<meta property="og:title" content="在Kotlin中调用Java代码" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://kotlinlang.org/docs/reference/java-interop.html" />
<meta property="og:image" content="https://kotlinlang.org/assets/images/open-graph/kotlin_250x250.png" />

<meta property="og:description" content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">

<meta property="og:site_name" content="Kotlin" />

<!-- Twitter Card data -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@kotlin">
<meta name="twitter:title" content="在Kotlin中调用Java代码">

<meta name="twitter:description" content="Kotlin is a statically typed programming language for the JVM, Android and the browser, 100% interoperable with Java">

<meta name="twitter:image:src" content="https://kotlinlang.org/assets/images/twitter-card/kotlin_800x320.png ">
<!-- Social Media tag Ends -->
<script src="/kotlin-web-site-cn/js/vendor/requirejs/require.js"></script>
<script src="/kotlin-web-site-cn/js/config/bootstrap.js"></script>
</head>
<body>
<!-- 
 -->

<div class="global-layout">

    <header class="global-header">

    <div class="global-header-panel">
        <div class="g-layout">
            <a class="global-header-logo" href="/kotlin-web-site-cn/">Kotlin</a>

            

            <nav role="navigation" class="global-nav">
    

    <div class="nav-links">
        
            
            
            
            

            

            

            

            <a href="/kotlin-web-site-cn/docs/reference/"
               class="nav-item "
            >
                学习
            </a>
        
            
            
            
            

            

            

            

            <a href="/kotlin-web-site-cn/contribute.html"
               class="nav-item "
            >
                贡献
            </a>
        
            
            
            
            

            

            

            

            <a href="http://try.kotlinlang.org"
               class="nav-item "
            >
                在线尝试
            </a>
        
            
            
            
            

            
                
    </div>

    

    <div id="global-search" class=" global-search" title="Search">
    <div class="search-button">
        <div class="icon"></div>
    </div>
    <div class="search-box">
        <div class="gcse-searchbox-only"
             data-resultsUrl="/search.html"
             data-newWindow="false"
        ></div>
    </div>
</div>
</nav>

        </div>
    </div>

    <div class="g-layout">
        
    </div>
</header>


    <div class="g-layout global-content">
        <div class="g-grid">

    <div class="g-12">
        
    

    <nav role="navigation" class="docs-nav">
        
            
            

            <div class="nav-item-wrap">
            
                    <a href="/kotlin-web-site-cn/docs/reference/" class="nav-item is_active">
                        <span class="nav-item-text">
                            参考
                        </span>
                    </a>
            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/tutorials/" class="nav-item">
                    <span class="nav-item-text">
                        教程
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/videos.html" class="nav-item">
                    <span class="nav-item-text">
                        视频
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/events.html" class="nav-item">
                    <span class="nav-item-text">
                        事件记
                    </span>
                </a>

            
            </div>
        
            
            

            <div class="nav-item-wrap">
            
                <a href="/kotlin-web-site-cn/docs/resources.html" class="nav-item">
                    <span class="nav-item-text">
                        更多资源
                    </span>
                </a>

            
            </div>
        
    </nav>


    </div>

    <aside class="g-3">
        <div id="reference-nav">
            





<nav role="navigation" class="side-tree-nav">

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="开始">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">开始</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/basic-syntax.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">基础语法</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/idioms.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">习惯用法</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/coding-conventions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">编码习惯</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="基础">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">基础</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/basic-types.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">基本类型</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/packages.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">包</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/control-flow.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">控制流</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/returns.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">返回和跳转</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="类和对象">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">类和对象</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类和继承</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/properties.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">属性和字段</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/interfaces.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">接口</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/visibility-modifiers.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">可见性修饰符</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/extensions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">扩展</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/data-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">数据类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/generics.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">泛型</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/nested-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">嵌套类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/enum-classes.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">枚举类</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/object-declarations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">对象</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/delegation.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">委托</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/delegated-properties.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">委托属性</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="函数和Lambdas表达式">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">函数和Lambdas表达式</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/functions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">函数</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/lambdas.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Lambdas表达式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/inline-functions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">内联函数</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="其他">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">其他</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/multi-declarations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">解构声明</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/collections.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">集合</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/ranges.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">范围</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/typecasts.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类型检查与转换</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/this-expressions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">This表达式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/equality.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">等式</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/operator-overloading.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">操作符重载</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/null-safety.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">空安全</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/exceptions.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">异常</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/annotations.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">注解</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/reflection.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">反射</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/type-safe-builders.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">类型安全的构建器</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/dynamic-type.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">动态类型</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="参考">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">参考</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/api/latest/jvm/stdlib/"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">API参考</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/grammar.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">语法</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _opened"
         data-id="互操作">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">互操作</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <div class="tree-item-title tree-leaf-title js-item-title js-leaf-title is_active">
                    <div class="marker"></div>
                    <div class="text">Kotlin 调用 Java</div>
                </div>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/java-to-kotlin-interop.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Java 调用 Kotlin</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="工具">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">工具</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/kotlin-doc.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">生成kotlin代码文档</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-maven.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Maven</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-ant.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Ant</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/using-gradle.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">使用 Gradle</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/kotlin-osgi.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">Kotlin 和 OSGi</span></a>
            
            </div>
        

    </div>

    

    

    <div class="tree-item tree-branch js-item js-branch _closed"
         data-id="常见问题">

        <div class="tree-item-title tree-branch-title js-item-title js-branch-title">
            <div class="marker"></div>
            <div class="text">常见问题</div>
        </div>

        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/faq.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">常见问题</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/comparison-to-java.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">与Java比较</span></a>
            
            </div>
        
            
            

            
            

            <div class="tree-item tree-leaf js-item js-leaf">
            
                <a href="/kotlin-web-site-cn/docs/reference/comparison-to-scala.html"
                   class="tree-item-title tree-leaf-title js-item-title js-leaf-title "
                   ><span class="marker"></span><span class="text">与Scala比较</span></a>
            
            </div>
        

    </div>

    

</nav>

            <a href="https://raw.githubusercontent.com/cctanfujun/kotlin-web-site-cn/gh-pages/kotlin-docs.pdf" class="reference-pdf-link">
                <span class="icon"></span>
                <span class="text">Kotlin 手册 中文版</span>
            </a>
        </div>
    </aside>

    <article role="main" class="page-content g-9">
        


<a href="https://github.com/cctanfujun/kotlin-web-site-cn/edit/master/docs/reference/java-interop.md"
   class="page-link-to-github"
   target="_blank"
   title="Edit this page on GitHub">
        <i class="github-icon"></i>
        <span class="text">Edit Page</span>
</a>

        <h1 id="kotlinjava">在Kotlin中调用Java代码<a href="#kotlinjava" class="anchor"></a></h1>

<p>Kotlin 在设计时就是以与 java 交互为中心的。现存的 Java 代码可以在 kotlin 中使用，并且 Kotlin 代码也可以
在 Java 中流畅运行。这节我们会讨论在 kotlin 中调用 Java 代码的细节。</p>

<p>基本所有的 Java 代码都可以运行</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">import</span> <span class="nn">java.util.*</span>

<span class="k">fun</span> <span class="nf">demo</span><span class="p">(</span><span class="n">source</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="k">val</span> <span class="py">list</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;()</span>
  <span class="c1">// &#39;for&#39;-loops work for Java collections:</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">item</span> <span class="k">in</span> <span class="n">source</span><span class="p">)</span>
    <span class="n">list</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
  <span class="c1">// Operator conventions work as well:</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="m">0.</span><span class="p">.</span><span class="n">source</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span>
    <span class="n">list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">=</span> <span class="n">source</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c1">// get and set are called</span>
<span class="p">}</span></code></pre>

<h2 id="getters--setters">Getters 和 Setters<a href="#getters--setters" class="anchor"></a></h2>

<p>若一个属性的getter/setter方法按照约定的规范进行命名(getter方法以<code>get</code>开头不带参数/setter方法以<code>set</code>开头
带一个参数)，那么在Kotlin中可以直接对这个属性进行访问。如：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">import</span> <span class="nn">java.util.Calendar</span>

<span class="k">fun</span> <span class="nf">calendarDemo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">val</span> <span class="py">calendar</span> <span class="p">=</span> <span class="n">Calendar</span><span class="p">.</span><span class="n">getInstance</span><span class="p">()</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">calendar</span><span class="p">.</span><span class="n">firstDayOfWeek</span> <span class="p">==</span> <span class="n">Calendar</span><span class="p">.</span><span class="n">SUNDAY</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// call getFirstDayOfWeek()</span>
        <span class="n">calendar</span><span class="p">.</span><span class="n">firstDayOfWeek</span> <span class="p">=</span> <span class="n">Calendar</span><span class="p">.</span><span class="n">MONDAY</span>       <span class="c1">// call setFirstDayOfWeek()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>需要注意的是，对于只有setter方法的属性，kotlin目前还不支持对它的直接访问。</p>

<h2 id="void">返回void的方法<a href="#void" class="anchor"></a></h2>

<p>如果一个Java方法返回void，那么在Kotlin中，它会返回<code>Unit</code>。
万一有人使用它的返回值，Kotlin的编译器会在调用的地方赋值，
因为这个值本身已经提前可以预知了(这个值就是<code>Unit</code>)。</p>

<h2 id="javakotlin">将Java代码中与Kotlin关键字冲突的标识符进行转义<a href="#javakotlin" class="anchor"></a></h2>

<p>一些Kotlin的关键字在Java中是合法的标识符: <em class="keyword">in</em>, <em class="keyword">object</em>, <em class="keyword">is</em>, 等等.
如果一个Java库在方法中使用了Kotlin关键字,你仍然可以使用这个方法
使用反引号(`)转义来避免冲突。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="n">foo</span><span class="p">.</span><span class="n">`is`</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span></code></pre>

<h2 id="null">Null安全性和平台类型<a href="#null" class="anchor"></a></h2>

<p>Java中的所有引用都可能是<em class="keyword">null</em>值，这使得Kotlin严格的null控制对来自Java的对象来说变得不切实际。
在Kotlin中Java声明类型被特别对待叫做<em>platform types</em>.这种类型的Null检查是不严格的，
所以他们还维持着同Java中一样的安全性 (更多参见<a href="#mapped-types">下面</a>)。</p>

<p>考虑如下例子:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">list</span> <span class="p">=</span> <span class="n">ArrayList</span><span class="p">&lt;</span><span class="n">String</span><span class="p">&gt;()</span> <span class="c1">// non-null (constructor result)</span>
<span class="n">list</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">&quot;Item&quot;</span><span class="p">)</span>
<span class="k">val</span> <span class="py">size</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="c1">// non-null (primitive int)</span>
<span class="k">val</span> <span class="py">item</span> <span class="p">=</span> <span class="n">list</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="c1">// platform type inferred (ordinary Java object)</span></code></pre>

<p>当我们调用平台类型的变量上的方法时，Kotlin不会在编译阶段报出可能为空的错误，
但在运行时，会产生空指针异常，或者是断言失败的错误。后者是因为kotlin为了阻止null值传播会生成非空断言语句。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="n">item</span><span class="p">.</span><span class="n">substring</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="c1">// 允许, 如果item为空会抛异常</span></code></pre>

<p>平台类型是<em>不可转义</em>的，也就是说我们不能在程序里把他们写出来。
当把一个平台数值赋值给kotlin变量的时候（变量会有一个推断出来的平台类型，
上面的例子里就是<code>item</code>的类型），我们可以用类型推断，或者指定我们期望的类型（nullable和non-null类型都可以）：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">nullable</span><span class="p">:</span> <span class="n">String</span><span class="p">?</span> <span class="p">=</span> <span class="n">item</span> <span class="c1">// 允许，没有问题</span>
<span class="k">val</span> <span class="py">notNull</span><span class="p">:</span> <span class="n">String</span> <span class="p">=</span> <span class="n">item</span> <span class="c1">// 允许，运行时可能失败</span></code></pre>

<p>如果我们指定了一个非空类型，编译器会在赋值前额外生成一个断言。这样Kotlin的非空变量就不会有
空值。当把平台数值传递给只接受非空数值的kolin函数的时候，也同样会生成这个断言，
编译器尽可能的阻止空置在程序里传播。（因为泛型的存在，
有时也不能百分百的阻止）</p>

<h3 id="section">平台类型的概念<a href="#section" class="anchor"></a></h3>

<p>如上所述，平台类型不能在程序里显式的出现，
所以没有针对他们的语法。
然而，编译器和IDE有时需要显式他们(如在错误信息，参数信息中)，所以我们用
一个好记的标记来表示他们：</p>

<ul>
  <li><code>T!</code> 表示 “<code>T</code> 或者 <code>T?</code>”</li>
  <li><code>(Mutable)Collection&lt;T&gt;!</code> 表示 “<code>T</code>的java集合，可变的或不可变的，可空的或非空的”</li>
  <li><code>Array&lt;(out) T&gt;!</code> 表示 “<code>T</code>(或<code>T</code>的子类)的java数组，可空的或非空的”</li>
</ul>

<h3 id="section-1">可空性注解<a href="#section-1" class="anchor"></a></h3>

<p>Java types which have nullability annotations are represented not as platform types, but as actual nullable or non-null
Kotlin types. The compiler supports several flavors of nullability annotations, including:</p>

<ul>
  <li><a href="https://www.jetbrains.com/idea/help/nullable-and-notnull-annotations.html">JetBrains</a>
(<code>@Nullable</code> and <code>@NotNull</code> from the <code>org.jetbrains.annotations</code> package)</li>
  <li>Android (<code>com.android.annotations</code> and <code>android.support.annotations</code>)</li>
  <li>JSR-305 (<code>javax.annotation</code>)</li>
  <li>FindBugs (<code>edu.umd.cs.findbugs.annotations</code>)</li>
  <li>Eclipse (<code>org.eclipse.jdt.annotation</code>)</li>
  <li>Lombok (<code>lombok.NonNull</code>).</li>
</ul>

<p>You can find the full list in the <a href="https://github.com/JetBrains/kotlin/blob/master/core/descriptor.loader.java/src/org/jetbrains/kotlin/load/java/JvmAnnotationNames.kt">Kotlin compiler source code</a>.</p>

<h2 id="section-2">已映射类型<a href="#section-2" class="anchor"></a></h2>

<p>Kotlin特殊处理一部分java类型。这些类型不是通过as或is来直接转换，而是_映射_到了指定的kotlin类型上。
映射只发生在编译期间，运行时仍然是原来的类型。
java的原生类型映射成如下kotlin类型（记得 <a href="#platform-types">平台类型</a>）：</p>

<table class="zebra">
  <thead>
    <tr>
      <th><strong>Java类型</strong></th>
      <th><strong>Kotlin类型</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>byte</code></td>
      <td><code>kotlin.Byte</code></td>
    </tr>
    <tr>
      <td><code>short</code></td>
      <td><code>kotlin.Short</code></td>
    </tr>
    <tr>
      <td><code>int</code></td>
      <td><code>kotlin.Int</code></td>
    </tr>
    <tr>
      <td><code>long</code></td>
      <td><code>kotlin.Long</code></td>
    </tr>
    <tr>
      <td><code>char</code></td>
      <td><code>kotlin.Char</code></td>
    </tr>
    <tr>
      <td><code>float</code></td>
      <td><code>kotlin.Float</code></td>
    </tr>
    <tr>
      <td><code>double</code></td>
      <td><code>kotlin.Double</code></td>
    </tr>
    <tr>
      <td><code>boolean</code></td>
      <td><code>kotlin.Boolean</code></td>
    </tr>
  </tbody>
</table>

<p>一些非原生类型也会作映射：</p>

<table class="zebra">
  <thead>
    <tr>
      <th><strong>Java类型</strong></th>
      <th><strong>Kotlin类型</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>java.lang.Object</code></td>
      <td><code>kotlin.Any!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Cloneable</code></td>
      <td><code>kotlin.Cloneable!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Comparable</code></td>
      <td><code>kotlin.Comparable!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Enum</code></td>
      <td><code>kotlin.Enum!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Annotation</code></td>
      <td><code>kotlin.Annotation!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Deprecated</code></td>
      <td><code>kotlin.Deprecated!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Void</code></td>
      <td><code>kotlin.Nothing!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.CharSequence</code></td>
      <td><code>kotlin.CharSequence!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.String</code></td>
      <td><code>kotlin.String!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Number</code></td>
      <td><code>kotlin.Number!</code></td>
    </tr>
    <tr>
      <td><code>java.lang.Throwable</code></td>
      <td><code>kotlin.Throwable!</code></td>
    </tr>
  </tbody>
</table>

<p>集合类型在Kotlin里可以是只读的或可变的，因此Java集合类型作如下映射：
（下表所有的Kotlin类型都在<code>Kotlin</code>包里）</p>

<table class="zebra">
  <thead>
    <tr>
      <th><strong>Java类型</strong></th>
      <th><strong>Kotlin只读类型</strong></th>
      <th><strong>Kotlin可变类型</strong></th>
      <th><strong>加载的平台类型</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Iterator&lt;T&gt;</code></td>
      <td><code>Iterator&lt;T&gt;</code></td>
      <td><code>MutableIterator&lt;T&gt;</code></td>
      <td><code>(Mutable)Iterator&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>Iterable&lt;T&gt;</code></td>
      <td><code>Iterable&lt;T&gt;</code></td>
      <td><code>MutableIterable&lt;T&gt;</code></td>
      <td><code>(Mutable)Iterable&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>Collection&lt;T&gt;</code></td>
      <td><code>Collection&lt;T&gt;</code></td>
      <td><code>MutableCollection&lt;T&gt;</code></td>
      <td><code>(Mutable)Collection&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>Set&lt;T&gt;</code></td>
      <td><code>Set&lt;T&gt;</code></td>
      <td><code>MutableSet&lt;T&gt;</code></td>
      <td><code>(Mutable)Set&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>List&lt;T&gt;</code></td>
      <td><code>List&lt;T&gt;</code></td>
      <td><code>MutableList&lt;T&gt;</code></td>
      <td><code>(Mutable)List&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>ListIterator&lt;T&gt;</code></td>
      <td><code>ListIterator&lt;T&gt;</code></td>
      <td><code>MutableListIterator&lt;T&gt;</code></td>
      <td><code>(Mutable)ListIterator&lt;T&gt;!</code></td>
    </tr>
    <tr>
      <td><code>Map&lt;K, V&gt;</code></td>
      <td><code>Map&lt;K, V&gt;</code></td>
      <td><code>MutableMap&lt;K, V&gt;</code></td>
      <td><code>(Mutable)Map&lt;K, V&gt;!</code></td>
    </tr>
    <tr>
      <td><code>Map.Entry&lt;K, V&gt;</code></td>
      <td><code>Map.Entry&lt;K, V&gt;</code></td>
      <td><code>MutableMap.MutableEntry&lt;K,V&gt;</code></td>
      <td><code>(Mutable)Map.(Mutable)Entry&lt;K, V&gt;!</code></td>
    </tr>
  </tbody>
</table>

<p>Java数组的映射在这里提到过 <a href="java-interop.html#java-arrays">below</a>：</p>

<table class="zebra">
  <thead>
    <tr>
      <th><strong>Java类型</strong></th>
      <th><strong>Kotlin类型</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int[]</code></td>
      <td><code>kotlin.IntArray!</code></td>
    </tr>
    <tr>
      <td><code>String[]</code></td>
      <td><code>kotlin.Array&lt;(out) String&gt;!</code></td>
    </tr>
  </tbody>
</table>

<h2 id="kotlinjava-1">Kotlin中的Java泛型<a href="#kotlinjava-1" class="anchor"></a></h2>

<p>Kotlin的泛型和Java的有些不同（详见 <a href="generics.html">Generics</a>）。当引入java类型的时候，我们作如下转换：</p>

<ul>
  <li>Java的通配符转换成类型投射
    <ul>
      <li><code>Foo&lt;? extends Bar&gt;</code> 转换成 <code>Foo&lt;out Bar!&gt;!</code></li>
      <li><code>Foo&lt;? super Bar&gt;</code> 转换成 <code>Foo&lt;in Bar!&gt;!</code></li>
    </ul>
  </li>
  <li>Java的原始类型转换成星号投射
    <ul>
      <li><code>List</code> 转换成 <code>List&lt;*&gt;!</code>, 也就是 <code>List&lt;out Any?&gt;!</code></li>
    </ul>
  </li>
</ul>

<p>和Java一样，Kotlin在运行时不保留泛型，即对象不知道传递到他们构造器中的那些参数的的实际类型。
也就是，<code>ArrayList&lt;Integer&gt;()</code> 和 <code>ArrayList&lt;Character&gt;()</code> 是区分不出来的。
这意味着，不可能用 <em class="keyword">is</em>-来检测泛型。
Kotlin只允许用<em class="keyword">is</em>-来检测星号投射的泛型类型:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="k">is</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Int</span><span class="p">&gt;)</span> <span class="c1">// 错误: 不能检测是否是一个Int的List</span>
<span class="c1">// but</span>
<span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="k">is</span> <span class="n">List</span><span class="p">&lt;*&gt;)</span> <span class="c1">// 可以：不保证list里面的内容类型</span></code></pre>

<h3 id="java">Java数组<a href="#java" class="anchor"></a></h3>

<p>和Java不同，Kotlin里的数组不是协变的。Kotlin不允许我们把<code>Array&lt;String&gt;</code> 赋值给 <code>Array&lt;Any&gt;</code>，
从而避免了可能的运行时错误。Kotlin也禁止我们把一个子类的数组当做父类的数组传递进Kotlin的方法里。
但是对Java方法，这是允许的（考虑这种形式的平台类型<a href="#platform-types">platform types</a> <code>Array&lt;(out) String&gt;!</code>）。</p>

<p>Java平台上，原生数据类型的数组被用来避免封箱/开箱的操作开销。
由于Kotlin隐藏了这些实现细节，就得有一个变通方法和Java代码交互。
每个原生类型的数组都有一个特有类(specialized class)来处理这种问题(<code>IntArray</code>, <code>DoubleArray</code>, <code>CharArray</code> …)。
它们不是<code>Array</code>类，而是被编译成java的原生数组，来获得最好的性能。</p>

<p>假设有一个Java方法，它接收一个表示索引的int数组作参数</p>

<pre><code class="code-block _highlighted lang_java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaArrayExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeIndices</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// code here...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>

<p>在Kotlin里你可以这样传递一个原生数组:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">javaObj</span> <span class="p">=</span> <span class="n">JavaArrayExample</span><span class="p">()</span>
<span class="k">val</span> <span class="py">array</span> <span class="p">=</span> <span class="n">intArrayOf</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">javaObj</span><span class="p">.</span><span class="n">removeIndices</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>  <span class="c1">// passes int[] to method</span></code></pre>

<p>当编译成jvm字节码的时候，编译器会优化对数组的访问，确保不会产生额外的负担。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">array</span> <span class="p">=</span> <span class="n">arrayOf</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="n">array</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="p">=</span> <span class="n">array</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="p">*</span> <span class="m">2</span> <span class="c1">// 不会生成对get() 和 set()的调用</span>
<span class="k">for</span> <span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="n">array</span><span class="p">)</span> <span class="c1">// 不会创建迭代器</span>
  <span class="n">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></code></pre>

<p>即便是用索引遍历数组。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="n">array</span><span class="p">.</span><span class="n">indices</span><span class="p">)</span> <span class="c1">// 不会创建迭代器</span>
  <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">+=</span> <span class="m">2</span></code></pre>

<p>最后，<em class="keyword">in</em>-检测也没有额外负担。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="k">in</span> <span class="n">array</span><span class="p">.</span><span class="n">indices</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 和 (i &gt;= 0 &amp;&amp; i &lt; array.size) 一样</span>
  <span class="n">print</span><span class="p">(</span><span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<span class="p">}</span></code></pre>

<h2 id="java-varargs">Java Varargs<a href="#java-varargs" class="anchor"></a></h2>

<p>Java类也会这样声明方法，表示参数是可变参数。</p>

<pre><code class="code-block _highlighted lang_java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JavaArrayExample</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">removeIndices</span><span class="o">(</span><span class="kt">int</span><span class="o">...</span> <span class="n">indices</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// code here...</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre>

<p>这种情况，你需要用展开操作符 <code>*</code> 来传递 <code>IntArray</code>：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">javaObj</span> <span class="p">=</span> <span class="n">JavaArray</span><span class="p">()</span>
<span class="k">val</span> <span class="py">array</span> <span class="p">=</span> <span class="n">intArrayOf</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
<span class="n">javaObj</span><span class="p">.</span><span class="n">removeIndicesVarArg</span><span class="p">(*</span><span class="n">array</span><span class="p">)</span></code></pre>

<p>目前无法传递 <em class="keyword">null</em> 给一个变参的方法。</p>

<h2 id="section-3">操作符<a href="#section-3" class="anchor"></a></h2>

<p>虽然Java不能自定义操作符重载，但Kotlin允许任意
使用方法名合法的方法与标示符进行操作符重载，也可以自定义其它约定（如<code>invoke()</code>等）。
但调用Java代码的时候，使用中缀语法(<code>infix call syntax</code>)是不被允许的。</p>

<h2 id="section-4">受检异常<a href="#section-4" class="anchor"></a></h2>

<p>在Kotlin里，所有的异常都是非受检的, 也就是说，编译器不会强制你去捕捉任何异常。
因此，你调用一个声明了异常的java方法的时候，kotlin不会强制你作处理。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">fun</span> <span class="nf">render</span><span class="p">(</span><span class="n">list</span><span class="p">:</span> <span class="n">List</span><span class="p">&lt;*&gt;,</span> <span class="n">to</span><span class="p">:</span> <span class="n">Appendable</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">item</span> <span class="k">in</span> <span class="n">list</span><span class="p">)</span>
    <span class="n">to</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">toString</span><span class="p">())</span> <span class="c1">// Java里会让你在这里捕捉IOException</span>
<span class="p">}</span></code></pre>

<h2 id="section-5">对象方法<a href="#section-5" class="anchor"></a></h2>

<p>当java类型被引入到kotlin里时，所有的<code>java.lang.Object</code>类型引用，会被转换成 <code>Any</code>。
因为<code>Any</code>不是平台独有的，它仅声明了三个成员方法：<code>toString()</code>, <code>hashCode()</code> 和 <code>equals()</code>，
所以为了能用到<code>java.lang.Object</code>的其他方法，kotlin采用了<a href="extensions.html">扩展函数</a>。</p>

<h3 id="waitnotify">wait()/notify()<a href="#waitnotify" class="anchor"></a></h3>

<p><a href="http://www.oracle.com/technetwork/java/effectivejava-136174.html">Effective Java</a> 第69条善意的提醒了要用concurrency类而不是<code>wait()</code> 和 <code>notify()</code>。
因此，<code>Any</code>不提供这两个方法。
你一定要用的话，就把它转换成<code>java.lang.Object</code>。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="p">(</span><span class="n">foo</span> <span class="k">as</span> <span class="n">java</span><span class="p">.</span><span class="n">lang</span><span class="p">.</span><span class="n">Object</span><span class="p">).</span><span class="n">wait</span><span class="p">()</span></code></pre>

<h3 id="getclass">getClass()<a href="#getclass" class="anchor"></a></h3>

<p>获取一个对象的类型信息，我们可以用javaClass这个扩展属性。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">fooClass</span> <span class="p">=</span> <span class="n">foo</span><span class="p">.</span><span class="n">javaClass</span></code></pre>

<p>用javaClass<foo>()，而不是java里的写法`Foo.class`。</foo></p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">fooClass</span> <span class="p">=</span> <span class="n">javaClass</span><span class="p">&lt;</span><span class="n">Foo</span><span class="p">&gt;()</span></code></pre>

<h3 id="clone">clone()<a href="#clone" class="anchor"></a></h3>

<p>要重写<code>clone()</code>，扩展<code>kotlin.Cloneable</code>：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">Example</span> <span class="p">:</span> <span class="n">Cloneable</span> <span class="p">{</span>
  <span class="k">override</span> <span class="k">fun</span> <span class="nf">clone</span><span class="p">():</span> <span class="n">Any</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>不要忘了 <a href="http://www.oracle.com/technetwork/java/effectivejava-136174.html">Effective Java</a>,第11条: <em>谨慎的重写克隆</em>。</p>

<h3 id="finalize">finalize()<a href="#finalize" class="anchor"></a></h3>

<p>要重载 <code>finalize()</code>, 你要做的仅仅是声明它，不需要 <em class="keyword">override</em> 关键字：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">class</span> <span class="nc">C</span> <span class="p">{</span>
  <span class="k">protected</span> <span class="k">fun</span> <span class="nf">finalize</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// 具体逻辑</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>

<p>根据 Java 的规则， <code>finalize()</code>不能为 <em class="keyword">private</em>。</p>

<h2 id="java-1">从 Java类的继承<a href="#java-1" class="anchor"></a></h2>

<p>在kotlin里，超类里最多只能有一个java类(java接口数目不限)。这个java类必须放在超类列表的最前面。</p>

<h3 id="section-6">访问静态成员<a href="#section-6" class="anchor"></a></h3>

<p>java类的静态成员就是它们的 “伴生对象”。我们无法将这样的“伴生对象”当作数值来传递，
但可以显式的访问它们，比如：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">if</span> <span class="p">(</span><span class="n">Character</span><span class="p">.</span><span class="n">isLetter</span><span class="p">(</span><span class="n">a</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}</span></code></pre>

<h2 id="java-">Java 反射<a href="#java-" class="anchor"></a></h2>

<p>Java反射可以用在kotlin类上，反之亦然。前面提过，你可以 <code>instance.javaClass</code> 或者
<code>ClassName::class.java</code> 开始基于 <code>java.lang.Class</code> 的java反射操作。</p>

<p>Other supported cases include acquiring a Java getter/setter method or a backing field for a Kotlin property, a <code>KProperty</code> for a Java field, a Java method or constructor for a <code>KFunction</code> and vice versa.</p>

<h2 id="sam-">SAM(单抽象方法) 转换<a href="#sam-" class="anchor"></a></h2>

<p>就像 Java 8 那样，Kotlin 支持 SAM 转换，这意味着 Kotlin 函数字面量可以被自动的转换成
只有一个非默认方法的 Java 接口的实现，只要这个方法的参数类型
能够跟这个 Kotlin 函数的参数类型匹配的上。</p>

<p>你可以这样创建SAM接口的实例：</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">runnable</span> <span class="p">=</span> <span class="n">Runnable</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;This runs in a runnable&quot;</span><span class="p">)</span> <span class="p">}</span></code></pre>

<p>…在方法调用里:</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="k">val</span> <span class="py">executor</span> <span class="p">=</span> <span class="n">ThreadPoolExecutor</span><span class="p">()</span>
<span class="c1">// Java签名: void execute(Runnable command)</span>
<span class="n">executor</span><span class="p">.</span><span class="n">execute</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;This runs in a thread pool&quot;</span><span class="p">)</span> <span class="p">}</span></code></pre>

<p>如果 Java 类有多个接受函数接口的方法，你可以用一个
适配函数来把闭包转成你需要的 SAM 类型。编译器也会在必要时生成这些适配函数。</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="n">executor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">Runnable</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">&quot;This runs in a thread pool&quot;</span><span class="p">)</span> <span class="p">})</span></code></pre>

<p>注意SAM的转换只对接口有效，对抽象类无效，即使它们就只有一个
抽象方法。</p>

<p>还要注意这个特性只针对和 Java 的互操作；因为 Kotlin 有合适的函数类型，把函数自动转换成
Kotlin 接口的实现是没有必要的，也就没有支持了。</p>

<h2 id="kotlinjni">在Kotlin中使用JNI<a href="#kotlinjni" class="anchor"></a></h2>

<p>如果要声明一个使用本机代码(C 或者 C++)实现的方法，你需要给它加上<code>external</code>标识符(等同于Java里的<code>native</code>)</p>

<pre><code class="code-block _highlighted lang_kotlin"><span class="n">external</span> <span class="k">fun</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">):</span> <span class="n">Double</span></code></pre>

<p>余下的工作和Java完全一样</p>

    </article>
</div>

<script>
require(['page/reference'], function(page) {
    page();
});
</script>
    </div>

</div>

<footer role="contentinfo" class="global-footer">

    <div class="global-footer-terms">
        <div class="g-layout">

            <div class="terms-copyright">
                &copy; 2000&ndash;2016 JetBrains. All rights reserved
            </div>

            <div class="terms-sponsor">
                Sponsored and developed by <a href="http://jetbrains.com" class="sponsor sponsor_jetbrains" target="_blank">JetBrains</a> Translation by <a href="http://tanfujun.com" class="testimonial-company-link" target="_blank" rel="nofollow">晓_晨DEV</a>
            </div>
        </div>
    </div>

</footer>
<script>require(['com/search', 'com/cookie-banner']);</script>
</body>
</html>